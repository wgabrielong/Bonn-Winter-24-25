\section{Lecture 9 -- 8th November 2024}\label{sec: lecture 9}
Several of the examples presented in \Cref{sec: lecture 8} suggest a close connection between scheme theory and the study of classical algebraic geometry. We begin with a brief interlude connecting these areas of study, before returning to a discussion of scheme theory. 

Classical algebraic geometry begins with a an algebraically closed field $k=\overline{k}$ or $\CC$ and an affine algebraic set $X\subseteq k^{n}$ which is naturally a ringed space as described in \Cref{ex: affine algebraic sets}. For such an affine algebraic set we can consider the ideal $\afrak\subseteq k[x_{1},\dots,x_{n}]$ consisting of polynomials vanishing on $X$ which by Hilbert's Nullstellensatz\marginpar{See, for example, \cite[\href{https://stacks.math.columbia.edu/tag/00FS}{Tag 00FS}]{stacks-project}.} can be identified with $\mspec(A[X])$ where $A[X]=k[x_{1},\dots,x_{n}]/\sqrt{\afrak}$ and $\sqrt{\afrak}$ is the radical ideal of $\afrak\subseteq k[x_{1},\dots,x_{n}]$. We can define an affine scheme $\spec(A[X])$ with its associated structure sheaf which admits a map from $X=\mspec(A[X])$ by the inclusion of the maximal spectrum into the prime spectrum which is continuous in the Zariski topology by definition. 

The map $f:X\to\spec(A[X])$ extends to a map of ringed spaces with $f^{\sharp}:\Ocal_{\spec(A[X])}\to f_{*}\Ocal_{X}$ associating a section $s:U\to\coprod_{\pfrak\in U}A[X]_{\pfrak}$ to the section $\overline{s}:U\cap\mspec(A[X])\to\coprod_{\mfrak\in U\cap\mspec(A[X])}A[X]_{\mfrak}$ which naturally extends to $k$ under the isomorphism $A[X]_{\mfrak}/\mfrak A[X]_{\mfrak}\cong k$, and in fact define an isomorphism on stalks, making $f^{\sharp}$ a morphism of locally ringed spaces. 

In fact, passing from algebra to (affine) schemes loses no information. To show this, we will require the following lemma. 
\begin{lemma}\label{lem: affine schemes are quasicompact}
    The prime spectrum of a ring $\spec(A)$ is a quasicompact topological space -- each open cover admits a finite subcover. 
\end{lemma}
\begin{proof}
    Let $\{U_{i}\}_{i\in I}$ be an open cover of $X$. Since distinguished open sets $D(f_{i})$ for $f_{i}\in A$ form a basis for the Zariski topology we can, without loss of generality, take the cover to be $\{D(f_{i})\}_{i\in I}$. As such, the ideal generated by $\{f_{i}\}_{i\in I}$ is $A$ and there thus exists a finite subset $J\subseteq I$ such that $\sum_{i\in J}a_{i}f_{i}=1$ producing $\{D(f_{i})\}_{i\in J}$ a finite subcover. 
\end{proof}
We are now prepared to show the proposition.  
\begin{proposition}\label{prop: affine schemes is antiequivalent to rings}
    There is an equivalence of categories between $\Ring^{\Opp}$ and $\mathsf{AffSch}$. 
\end{proposition}
\begin{proof}
    We first show that the functor $A\to\spec(A)$ is fully faithful: that is, for rings $A,B$, there is a bijection 
    $$\Mor_{\Ring}(A,B)\to\Mor_{\mathsf{AffSch}}(\spec(B),\spec(A)).$$
    Suppose $f:\spec(B)\to\spec(A)$ is a morphism of affine schemes. We define a ring morphism $A\to B$ by taking global sections on $f^{\sharp}$ giving 
    $$\Ocal_{\spec(A)}(\spec(A))=A\to B=\Ocal_{\spec(B)}(\spec(B))=\Ocal_{\spec(B)}(f^{-1}(\spec(A))).$$
    Conversely given a ring homomorphism $\varphi:A\to B$, we can construct a morphism of topological spaces $f:\spec(B)\to\spec(A)$ by taking $\qfrak\mapsto\varphi^{-1}(\qfrak)$. We can define a map on structure sheaves $f^{\sharp}:\Ocal_{\spec(A)}\to f_{*}\Ocal_{\spec(B)}$ by considering open distinguished open subsets on which the map is given by $\Ocal_{\spec(A)}(D(f_{i}))\to f_{*}\Ocal_{\spec(B)}(D(f_{i}))=\Ocal_{\spec(B)}(D(\varphi(f_{i})))$ which is unique by the universal property of localization. This commutes with restriction as on $D(f_{i}f_{j})$ the induced map $\Ocal_{\spec(A)}(D(f_{i}f_{j}))\to f_{*}\Ocal_{\spec(B)}(D(\varphi(f_{i}f_{j})))=\Ocal_{\spec(B)}(D(\varphi(f_{i})\varphi(f_{j})))$. Moreover, this morphism is a local ring homomorphism in the sense of \Cref{def: local ring homomorphism} since for $\qfrak\subseteq B$ prime with $f(\qfrak)=\varphi^{-1}(\qfrak)=\pfrak\subseteq A$ we get the commutative diagram on taking global sections and localizing 
    $$% https://q.uiver.app/#q=WzAsNCxbMCwwLCJBIl0sWzIsMCwiQiJdLFswLDEsIlxcT2NhbF97XFxzcGVjKEEpLFxccGZyYWt9Il0sWzIsMSwiXFxPY2FsX3tcXHNwZWMoQiksXFxxZnJha30iXSxbMCwxLCJcXHZhcnBoaSJdLFswLDJdLFsxLDNdLFsyLDMsImZee1xcc2hhcnB9X3tcXHFmcmFrfSIsMl1d
    \begin{tikzcd}
        A && B \\
        {\Ocal_{\spec(A),\pfrak}} && {\Ocal_{\spec(B),\qfrak}}
        \arrow["\varphi", from=1-1, to=1-3]
        \arrow[from=1-1, to=2-1]
        \arrow[from=1-3, to=2-3]
        \arrow["{f^{\sharp}_{\qfrak}}"', from=2-1, to=2-3]
    \end{tikzcd}$$
    giving $\qfrak B_{\qfrak}=\varphi^{-1}(\qfrak)A_{\varphi^{-1}(\qfrak)}=\pfrak A_{\pfrak}$ showing locality. 

    It remains to verify these constructions are mutually inverse. For $\varphi:A\to B$, sections on $D(1)$ over $f^{\sharp}:\Ocal_{\spec(A)}\to f_{*}\Ocal_{\spec(B)}$ recovers $\varphi$. Conversely for $f:\spec(B)\to\spec(A)$ and $\varphi$ the induced morphism of rings by taking global sections on the target, we can repeat the construction and produce a morphism of ringed spaces $(g,g^{\sharp})$ which we want to show is equal to $(f,f^{\sharp})$ where equality follows from commutativity with localization in the construction of $(f,f^{\sharp})$ from $\varphi:A\to B$ above. 

    Finally, we note that the functor is essentially surjective by definition since each affine scheme is of the form $\spec(A)$ for some ring $A$. This gives the claim. 
\end{proof}
We have just seen that affine schemes are indeed an enhancement of phenomena studied in classical algebraic geometry. To consider all schemes, however, we have to consider how affine schemes may be glued to a a general scheme. This is done by the general gluing lemma for ringed spaces. 
\begin{proposition}\label{prop: gluing sheaves}
    Let $X$ be a topological space, $\Ucal=\{U_{i}\}_{i\in I}$ an open cover of $X$, and $\Fcal_{i}$ a sheaf on $U_{i}$ with isomorphisms of sheaves $\phi_{ij}:\Fcal_{i}|_{U_{i}\cap U_{j}}\to\Fcal_{j}|_{U_{i}\cap U_{j}}$ such that the following hold:
    \begin{enumerate}[label=(\arabic*)]
        \item For each $i$, $\phi_{ii}:\Fcal_{i}|_{U_{i}}\to\Fcal_{i}|_{U_{i}}$ is $\id_{\Fcal_{i}}$. 
        \item For each $i,j,k$, $\phi_{ik}=\phi_{jk}\circ\phi_{ij}$ on $U_{i}\cap U_{j}\cap U_{k}$. 
    \end{enumerate}
    There is a unique sheaf $\Fcal$ on $X$ with isomorphisms $\psi_{i}:\Fcal|_{U_{i}}\to\Fcal_{i}$ such that for each $i,j$, $\psi_{j}=\phi_{ij}\circ\psi_{i}$. 
\end{proposition}
\begin{proof}
    Let $V\subseteq X$ open and consider 
    $$\Fcal(V)=\left\{(s_{i})_{i\in I}\in\prod_{i\in I}\Fcal_{i}(U_{i}\cap V):\phi_{ij}(s_{i}|_{U_{i}\cap U_{j}})=s_{j}|_{U_{i}\cap U_{j}}\forall i,j\in I\right\}.$$
    This is evidently a presheaf since if $W\subseteq V$ we have 
    $$\Fcal(W)=\left\{(s_{i}|_{W})_{i\in I}: (s_{i})_{i\in I}\in\prod_{i\in I}\Fcal_{i}(U_{i}\cap V), \phi_{ij}(s_{i}|_{U_{i}\cap U_{j}\cap W})=s_{j}|_{U_{i}\cap U_{j}\cap W}\forall i,j\in I\right\}$$
    by restricting sectoins on each $\Fcal_{i}(U_{I}\cap V)$. We show this is a sheaf. Suppose $\{V_{\alpha}\}_{\alpha\in A}$ is an open cover of $V$. (Identity) Further suppose $t,t'\in\Fcal(V)$ given by $(s_{i})_{i\in I}, (s'_{i})_{i\in I}\in \prod_{i\in I}\Fcal_{i}(U_{i}\cap V)$ such that $t|_{V_{\alpha}}=t'|_{V_{\alpha}}$ for all $\alpha\in A$. Note further that the cover $\{U_{i}\cap V_{\alpha}\}_{\alpha\in A, i\in I}$ of $V$ refines $\{V_{\alpha}\}_{\alpha\in A}$. We know that $s_{i}|_{U_{i}\cap V_{\alpha}}=s'_{i}|_{U_{i}\cap V_{\alpha}}$ for all $\alpha\in A$ and all $i\in I$ so $s_{i}=s'_{i}$ by identifying in $\Fcal_{i}(U_{i}\cap V)$ on the cover $\{U_{i}\cap V_{\alpha}\}_{\alpha\in A, i\in I}$ thus showing $t=t'$ since their entries agree pointwise. (Gluability) Let $t_{\alpha}\in\Fcal(V_{\alpha})$ be sections given by $(s_{\alpha,i})_{i\in I}\in\prod_{i\in I}\Fcal_{i}(U_{i}\cap V_{\alpha})$ such that $t_{\alpha}|_{V_{\alpha}\cap V_{\beta}}=t_{\beta}|_{V_{\alpha}\cap V_{\beta}}$ for all $\alpha,\beta\in A$. Thus we have $s_{\alpha, i}|_{U_{i}\cap V_{\alpha}\cap V_{\beta}}=s_{\beta,i}|_{U_{i}\cap V_{\alpha}\cap V_{\beta}}$ for all $i\in I$ and $\alpha,\beta\in A$. Note that $\{U_{i}\cap V_{\alpha}\}_{\alpha\in A}$ forms an open cover of $U_{i}$ and $s_{\alpha, i}$ agrees with $s_{\beta_{i}}$ on double intersections and hence glues uniquely to a section of $s\in\Fcal_{i}(U_{i}\cap V)$ so $t$ glues by the gluing of each entry in $\Fcal_{i}(U_{i}\cap V)$. The fact that $\Fcal$ is unique follows from checking on stalks. In particular $\Fcal_{p}\cong(\Fcal_{i})_{p}$ for all $p\in U_{i}$ and $\phi_{ij}((\Fcal_{i})_{p})=(\Fcal_{j})_{p}=\Fcal_{p}$ on $U_{i}\cap U_{j}$. 
    \\\\
    Take $\psi_{i}:\Fcal|_{U_{i}}\to\Fcal_{i}$ by $(s_{i})_{i\in I}\mapsto s_{i}$ and on $U_{i}\cap U_{j}$ for $(s_{i})_{i\in I}\in\Fcal$ we have $s_{j}=\phi_{ij}(s_{i})$ giving the desired equalities.  
\end{proof}
We now specialize to schemes. 
\begin{proposition}\label{prop: gluing schemes}
    Let $\{X_{i}\}_{i\in I}$ be a family of schemes. For each $i\neq j$, suppose given an open subset $U_{ij}\subseteq X_{i}$ with the induced subscheme structure, isomorphisms $\phi_{ij}:U_{ij}\to U_{ji}$ such that:
    \begin{enumerate}[label=(\arabic*)]
        \item For each $i,j$, $\phi_{ji}=\phi_{ij}^{-1}$. 
        \item For each $i,j,k$ $\phi_{ij}(U_{ij}\cap U_{ik})=U_{ji}\cap U_{jk}$. 
        \item For each $i,j,k$ $\phi_{ik}=\phi_{jk}\circ\phi_{ij}$ on $U_{ij}\cap U_{ik}$. 
    \end{enumerate}
    Show that there is a scheme $X$ together with morphisms $\psi_{i}:X_{i}\to X$ for each $i$ such that 
    \begin{enumerate}[label=(\arabic*)]
        \item $\psi_{i}$ is an isomorphism of $X_{i}$ onto an open subscheme of $X$. 
        \item The $\psi_{i}(X_{i})$ cover $X$. 
        \item $\psi_{i}(U_{ij})=\psi_{i}(X_{i})\cap \psi_{j}(X_{j})$. 
        \item $\psi_{i}=\psi_{j}\circ\phi_{ij}$ on $U_{ij}$. 
    \end{enumerate}
\end{proposition}
\begin{proof}
    We first construct $X$ as a topological space, taking 
    $$X=\coprod_{i\in I}X_{i}/\sim$$
    where $p\sim q$ if and only if $\phi_{ij}(p)=q$ for some pair of indices $i,j\in I$. Note that in $X$, $\psi_{i}(X_{i})$ is open since it is obtained by gluing the open $X_{i}$ along open subsets $U_{ij}$ and thus an inclusion and isomorphism onto its image by construction. The sheaves $\Ocal_{X_{i}}$ can be glued analogously to \Cref{prop: gluing sheaves} yielding a locally ringed space. Furthermore, $X$ is a scheme since it is the gluing of $X_{i}$'s, each of which is a gluing of affine schemes. 
\end{proof}
\begin{example}\label{ex: doubled origin}
    Let $X_{1}=X_{2}=\A^{1}_{k}$, $U_{1}=U_{2}=\A^{1}_{k}\setminus\{0\}$ glued along the map $x\mapsto x$. The resulting space is the line with doubled origin. 
\end{example}
\begin{example}\label{ex: projective line}
    Let $X_{1}=X_{2}=\A^{1}_{k}$, $U_{1}=U_{2}=\A^{1}_{k}\setminus\{0\}$ glued along the map $x\mapsto 1/x$. The resulting space is the projective line $\PP^{1}_{k}$.  
\end{example}
\begin{remark}
    We should in some sense consider \Cref{ex: doubled origin,ex: projective line} quite surprising since the line with doubled origin will serve as an example of a non-separated scheme which are poorly behaved, while the projective line will serve as an example of a proper scheme which are extremely well-behaved, even though they are obtained by gluing the same space $\A^{1}_{k}$. 
\end{remark}
We can now begin a discussion of properties of schemes, by listing definitions of properties of schemes. We first consider topological properties, which are detected on the underlying topological space. 
\begin{definition}[Connected Scheme]\label{def: connected scheme}
    Let $X$ be a scheme. $X$ is connected if there does not exist $X_{1},X_{2}$ nonempty proper closed subsets of $X$ with $X=X_{1}\sqcup X_{2}$. 
\end{definition}
\begin{definition}[Irreducible Scheme]\label{def: irreducible}
    Let $X$ be a scheme. $X$ is irreducible if there does not exist $U_{1},U_{2}$ nonempty proper closed subsets of $X$ with $X_{1}\cup X_{2}=X$. 
\end{definition}
\begin{definition}[Quasicompact Scheme]\label{def: quasicompact}
    Let $X$ be a scheme. $X$ is quasicompact if for every open cover of $X$ admits a finite subcover. 
\end{definition}
\begin{remark}
    We will not use the notion of ``compact'' in algebraic geometry which was first defined by the Bourbaki school to mean a space being both quasicompact and Hausdorff. The Hausdorff property is almost never fulfiled in the algebro-geometric setting. 
\end{remark}
\begin{example}
    Any affine scheme is quasicompact by \Cref{lem: affine schemes are quasicompact}.
\end{example}
We conclude with the definition of a scheme-theoretic property -- a property detected on the level of structure sheaves. 
\begin{definition}[Locally Noetherian Scheme]\label{lem: locally Noetherian}
    Let $X$ be a scheme. $X$ is locally Noetherian if it admits an affine open covering by spectra of Noetherian rings. 
\end{definition}
\begin{remark}\label{rmk: locally Noetherian is Zariski local property}
    This condition can be shown to be equivalent to every affine open subset of $X$ being the spectrum of a Noetherian ring. 
\end{remark}
A locally Noetherian scheme that is quasicompact is said to be Noetherian. 
\begin{definition}[Noetherian Scheme]\label{def: Noetherian}
    Let $X$ be a scheme. $X$ is Noetherian if it is locally Noetherian and quasicompact. 
\end{definition}